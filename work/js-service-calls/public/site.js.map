{"version":3,"file":"site.js","mappings":"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","sources":["webpack://js-service-calls/./src/messages.js","webpack://js-service-calls/./src/services.js","webpack://js-service-calls/./src/state.js","webpack://js-service-calls/webpack/bootstrap","webpack://js-service-calls/webpack/runtime/define property getters","webpack://js-service-calls/webpack/runtime/hasOwnProperty shorthand","webpack://js-service-calls/webpack/runtime/make namespace object","webpack://js-service-calls/./src/site.js"],"sourcesContent":["export const MESSAGES = {\r\n    'network-error': \"Server unavailable, please try again\",\r\n    'auth-missing': \"Auth unavailable, please login again\",\r\n    'required-username': \"Username should only contain letters and at least one letter, please try again\",\r\n    'auth-insufficient': \"Username dog has insufficient auth, please login using other username\",\r\n    'required-word': \"Word should have at least one character, please try again\",\r\n    'invalid-word': \"Word should only contain letters, please try again\",\r\n    default: \"Something went wrong, please try again\",\r\n};","// get /api/session\r\nexport function fetchPageLoad() {\r\n    return fetch('/api/session', {\r\n        method: 'GET',\r\n        credentials: 'include',\r\n    })\r\n    .catch( err => Promise.reject({ error: 'network-error' }) )\r\n    .then(response => {\r\n        if (!response.ok) {return response.json().then( err => Promise.reject(err) );}\r\n        return response.json();\r\n    })\r\n}\r\n\r\n// post /api/session\r\nexport function fetchLogin(username) {\r\n    return fetch('/api/session', {\r\n        method: 'POST',\r\n        headers: {\r\n            'content-type': 'application/json',\r\n        },\r\n        body: JSON.stringify( { username })\r\n    })\r\n    .catch(err => Promise.reject({ error: 'network-error' }) )\r\n    .then(response => {\r\n        if (!response.ok) { return response.json().then( err => Promise.reject(err) );}\r\n        return response.json();\r\n    })\r\n}\r\n\r\n// delete /api/session\r\nexport function fetchLogout() {\r\n    return fetch('/api/session', {\r\n        method: 'DELETE'\r\n    })\r\n    .then(response => {\r\n        if (!response.ok) {return response.json().then( err => Promise.reject(err) );}\r\n        return response.json();\r\n    })\r\n}\r\n\r\n// get /api/word\r\nexport function fetchWordView() {\r\n    return fetch('./api/word', {\r\n        method: 'GET',\r\n        credentials: 'include',\r\n    })\r\n    .catch( err => Promise.reject({ error: 'network-error' }) )\r\n    .then(response => {\r\n        if (!response.ok) {return response.json().then( err => Promise.reject(err) );}\r\n        return response.json();\r\n    })\r\n}\r\n\r\n// POST /api/word\r\nexport function fetchUpdatedWord(word) {\r\n    return fetch('/api/word', {\r\n        method: 'POST',\r\n        headers: {\r\n            'content-type': 'application/json',\r\n        },\r\n        body: JSON.stringify( { word })\r\n    })\r\n    .catch( err => Promise.reject({ error: 'network-error' }) )\r\n    .then(response => {\r\n        if (!response.ok) {return response.json().then( err => Promise.reject(err) );}\r\n        return response.json();\r\n    })\r\n}","export const state = {\r\n    activeUser: null,\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\"use strict\";\r\n\r\nimport { state } from \"./state\";\r\nimport { MESSAGES } from \"./messages\";\r\nimport { fetchPageLoad, fetchLogin, fetchUpdatedWord, fetchLogout, fetchWordView } from \"./services\";\r\n\r\n\r\n(function() {\r\n    const appEl = document.querySelector('#memo-app');\r\n\r\n    appEl.addEventListener('submit', (e) => {\r\n        if (e.target.classList.contains('login-form')) {\r\n            e.preventDefault();\r\n            const username = document.querySelector('.username-input').value;  \r\n            login(username);\r\n            return;\r\n        }\r\n        if (e.target.classList.contains('update-form')) {\r\n            e.preventDefault();\r\n            const newWord = document.querySelector('.word-input').value;  \r\n            updateWord(newWord);\r\n            return;\r\n        }\r\n    });\r\n    appEl.addEventListener('click', (e) => {\r\n        if (e.target.classList.contains('logout-btn')) {\r\n            logout();\r\n            return;\r\n        }\r\n    });\r\n\r\n    loadPage();\r\n\r\n\r\n    function loadPage() {\r\n        fetchPageLoad()\r\n        .then(() => getWordView())\r\n        .catch(err => {\r\n            if (err.error === \"auth-missing\") {\r\n                renderLogin();\r\n                return;\r\n            }\r\n            updateStatusEl(err.error);\r\n        })\r\n    }\r\n\r\n    function login(username) {\r\n        fetchLogin(username)\r\n        .then(() => getWordView())\r\n        .catch(err => {\r\n            updateStatusEl(err.error);\r\n            document.querySelector('.username-input').value = '';\r\n        });\r\n    }\r\n\r\n    function getWordView() {\r\n        fetchWordView()\r\n        .then(data => {\r\n            state.activeUser = data;\r\n            renderWordView(state.activeUser);\r\n        })\r\n        .catch(err => {\r\n            if (err.error === \"auth-missing\") {\r\n                renderLogin();\r\n            }\r\n            updateStatusEl(err.error)\r\n        });\r\n    }\r\n\r\n    function updateWord(newWord) {\r\n        fetchUpdatedWord(newWord)\r\n        .then(data => {\r\n            state.activeUser = data;\r\n            renderWordView(state.activeUser);\r\n        })\r\n        .catch(err => {\r\n            if (err.error === \"auth-missing\") {\r\n                renderLogin();\r\n            }\r\n            updateStatusEl(err.error);\r\n            document.querySelector('.word-input').value = '';\r\n        });\r\n    }\r\n\r\n    function logout() {\r\n        fetchLogout()\r\n        .then(() => renderLogin())\r\n        .catch(err => {\r\n            return;\r\n        });\r\n    }\r\n\r\n    function updateStatusEl(message) {\r\n        const statusEl = document.querySelector('.status');\r\n        statusEl.innerHTML = MESSAGES[message] || MESSAGES.default;\r\n    }\r\n\r\n\r\n    function renderLogin() {\r\n        appEl.innerHTML = `\r\n            <div class=\"status\"></div>\r\n            <h1>Login</h1>\r\n            <form action=\"/api/session\" method=\"post\" class=\"login-form\">\r\n                <input type=\"text\" name=\"username\" class=\"username-input\" placeholder=\"Enter username\" />\r\n                <button type=\"submit\" class=\"login-btn\">Login</button>\r\n            </form>  \r\n        `;\r\n    }\r\n\r\n    function renderWordView(user) {\r\n        appEl.innerHTML = `\r\n            <div class=\"status\"></div>\r\n            <h1>Welcome to Memo</h1>\r\n            <div class=\"user-info\">\r\n                <span>Logged in as: </span>\r\n                <span class=\"username\">${user.username}</span>\r\n            </div>\r\n            <div class=\"stored-word\">\r\n                <span>Stored Word: </span>\r\n                <span class=\"word\">${user.storedWord}</span>\r\n            </div>\r\n            <form action=\"/api/word\" method=\"post\" class=\"update-form\">\r\n                <input type=\"text\" name=\"word\" class=\"word-input\" placeholder=\"Update stored word\"/>\r\n                <button class=\"update-btn\" type=\"submit\">Update</button>\r\n            </form>\r\n            <button type=\"button\" class=\"logout-btn\">Logout</button>\r\n        `\r\n    }\r\n\r\n})();"],"names":["MESSAGES","fetchPageLoad","fetch","method","credentials","err","Promise","reject","error","then","response","ok","json","fetchLogin","username","headers","body","JSON","stringify","fetchLogout","fetchWordView","fetchUpdatedWord","word","state","activeUser","appEl","document","querySelector","addEventListener","e","target","classList","contains","preventDefault","value","login","newWord","updateWord","logout","loadPage","getWordView","renderLogin","updateStatusEl","data","renderWordView","message","statusEl","innerHTML","user","storedWord"],"sourceRoot":""}