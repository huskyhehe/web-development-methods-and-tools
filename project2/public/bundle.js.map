{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://project2/./src/checkers.js","webpack://project2/./src/constants.js","webpack://project2/./src/listeners.js","webpack://project2/./src/render.js","webpack://project2/./src/services.js","webpack://project2/./src/state.js","webpack://project2/webpack/bootstrap","webpack://project2/webpack/runtime/define property getters","webpack://project2/webpack/runtime/hasOwnProperty shorthand","webpack://project2/webpack/runtime/make namespace object","webpack://project2/./src/chat.js"],"sourcesContent":["export function isMessagesDataNewest(fetchedMessages, stateMessages) {\r\n    const fetchedLastMessageId = getLastElementKey(fetchedMessages);\r\n    const stateLastMessageId = getLastElementKey(stateMessages);\r\n    return fetchedLastMessageId === stateLastMessageId;\r\n}\r\n\r\nexport function isOnlineUsersDataNewest(fetchedOnlineUsers, stateOnlineUsers) {\r\n    const fetchedLastOnlineUser = getLastElementKey(fetchedOnlineUsers);\r\n    const stateLastOnlineUser = getLastElementKey(stateOnlineUsers);\r\n    return (fetchedLastOnlineUser === stateLastOnlineUser && Object.keys(fetchedOnlineUsers).length === Object.keys(stateOnlineUsers).length)\r\n}\r\n\r\nfunction getLastElementKey (jsonData) {\r\n    const arr =  Object.keys(jsonData);\r\n    return arr[arr.length - 1];\r\n}","export const SERVER = {\r\n    AUTH_MISSING: \"auth-missing\",\r\n    AUTH_INSUFFICIENT: \"auth-insufficient\",\r\n    AUTH_IN_USE: \"auth-in-use\",\r\n    REQUIRED_USERNAME: \"required-username\",\r\n    REQUIRED_TEXT: \"required-text\",\r\n    TASK_MISSING: \"noSuchId\",\r\n};\r\n\r\nexport const CLIENT = {\r\n    NETWORK_ERROR: \"networkError\",\r\n    NO_SESSION: \"noSession\",\r\n};\r\n\r\nexport const MESSAGES = {\r\n    [CLIENT.NETWORK_ERROR]:\r\n        \"Trouble connecting to the network.  Please try again\",\r\n    [SERVER.AUTH_INSUFFICIENT]:\r\n        \"Your username/password combination does not match any records, please try again.\",\r\n    [SERVER.REQUIRED_USERNAME]:\r\n        \"Please enter a valid (letters and/or numbers) username\",\r\n    [SERVER.REQUIRED_TEXT]: \"Please enter at least one character to send\",\r\n    default: \"Something went wrong.  Please try again\",\r\n};","import { \r\n    fetchLogin, \r\n    fetchLogout,\r\n    fetchOnlineUsers,\r\n    fetchAddMessage,\r\n} from \"./services\";\r\nimport { \r\n    login, \r\n    logout, \r\n    waitOnChat, \r\n    setOnlineUsers, \r\n    setMessages, \r\n    addMessage,\r\n    setError,\r\n} from \"./state\";\r\nimport { render } from \"./render\";\r\nimport { CLIENT } from \"./constants\";\r\n\r\n\r\nexport function addAbilityToLogin({ state, appEl }) {\r\n    appEl.addEventListener(\"submit\", (e) => {\r\n        e.preventDefault();\r\n        if (!e.target.classList.contains(\"login__form\")) {\r\n            return;\r\n        }\r\n\r\n        const username = appEl.querySelector(\".login__username\").value;\r\n        \r\n        fetchLogin(username)\r\n        .then( messages => {\r\n            login(username);\r\n            waitOnChat();\r\n            render({ state, appEl });\r\n            setMessages(messages);    \r\n            return fetchOnlineUsers();  \r\n        })\r\n        .then( onlineUsers => {\r\n            setOnlineUsers(onlineUsers);\r\n            setTimeout(() => {\r\n                render({ state, appEl });\r\n                scrollToLatestMessage();\r\n            }, 1500) \r\n        })\r\n        .catch( err => {\r\n            if( err?.error == CLIENT.NO_SESSION ) {\r\n                logout();\r\n                render({ state, appEl });\r\n                return;\r\n            }\r\n            setError(err?.error || \"ERROR\");\r\n            render({ state, appEl });\r\n        });\r\n    });\r\n}\r\n\r\nexport function addAbilityToLogout({ state, appEl }) {\r\n    appEl.addEventListener(\"click\", (e) => {\r\n        if (!e.target.classList.contains(\"controls__logout\")) {\r\n            return;\r\n        }\r\n        logout();\r\n        render({ state, appEl });\r\n        fetchLogout()\r\n        .catch( err => {\r\n            setError(err?.error || \"ERROR\");\r\n            render({ state, appEl });\r\n        });\r\n    });\r\n}\r\n\r\nexport function addAbilityToSendMessage({ state, appEl }) {\r\n    appEl.addEventListener(\"submit\", (e) => {\r\n        if (!e.target.classList.contains(\"send__form\")) {\r\n            return;\r\n        }\r\n        const text = appEl.querySelector(\".send__text\").value;\r\n        fetchAddMessage(text)\r\n        .then( text => {\r\n            addMessage({ id: text.id, text });\r\n            render({ state, appEl });\r\n            scrollToLatestMessage();\r\n        })\r\n        .catch( err => {\r\n            setError(err?.error || \"ERROR\");\r\n            render({ state, appEl });\r\n        });\r\n    });\r\n}\r\n\r\nexport function scrollToLatestMessage() {\r\n    const messagesEl = document.querySelector(\".messages\");\r\n    if (messagesEl) {\r\n        messagesEl.scrollTop = messagesEl.scrollHeight;\r\n    }\r\n}","export function render({ state, appEl }) {\r\n    const html = `\r\n        <main>\r\n            ${generateStatusHtml(state)}\r\n            ${generateLoginHtml(state)}\r\n            ${generateContentHtml(state)}\r\n        </main>\r\n   `;\r\n    appEl.innerHTML = html;\r\n}\r\n\r\nexport function rerenderMessages(state) {\r\n    const messagesEl = document.querySelector('.messages');\r\n    if (messagesEl) {\r\n        messagesEl.innerHTML = generateMessageListHtml(state);  \r\n    }\r\n}\r\n\r\nexport function rerenderOnlineUsers(state) {\r\n    const usersEl = document.querySelector('.users');\r\n    if (usersEl) {\r\n        usersEl.innerHTML = generateOnlineUsernameListHtml(state);\r\n    }\r\n}\r\n\r\nfunction generateStatusHtml(state) {\r\n    if (!state.error) {\r\n        return ``;\r\n    }   \r\n    return `<div class=\"status\"><p>${state.error}</p></div>`;\r\n}\r\n\r\nfunction generateLoginHtml(state) {\r\n    if (state.isLoggedIn) {\r\n        return ``;\r\n    };\r\n\r\n    if(state.isLoginPending) {\r\n        return `\r\n            <div class=\"login__waiting\">Loading user...</div>\r\n        `;\r\n    }\r\n    return `\r\n        <div class=\"login\">\r\n            <h2>Login</h2>\r\n            <form class=\"login__form\" action=\"#/login\">\r\n                <input class=\"login__username\" placeholder=\"Enter username\" value=\"\">\r\n                <button class=\"login__button\" type=\"submit\">Login</button>\r\n            </form>\r\n        </div>\r\n    `;\r\n}\r\n\r\nfunction generateContentHtml(state) {\r\n    if (!state.isLoggedIn) {\r\n        return ``;\r\n    }\r\n    if (state.isChatPending) {\r\n        return `\r\n            <div class=\"content__waiting\">\r\n                ${generateControlsHtml(state)}\r\n                <div class=\"chat__waiting\">Loading Chat...</div>\r\n            </div>\r\n        `;\r\n    }\r\n    return `\r\n        <div class=\"content\">\r\n            <div class=\"users__container\">\r\n                <h3>Online Users</h3>\r\n                <ul class=\"users\">${generateOnlineUsernameListHtml(state)}</ul>\r\n            </div>\r\n            <div class=${!state.error? \"messages__container\" : \"messages__container__with__status\"}>\r\n                ${generateControlsHtml(state)}\r\n                <ul class=\"messages\">${generateMessageListHtml(state)}</ul>\r\n                <div class=\"send\">${generateSendMessageHtml(state)}</div>\r\n            <div>\r\n        </div>\r\n    `;\r\n}\r\n\r\nfunction generateControlsHtml(state) {\r\n    return `\r\n        <div class=\"controls\">\r\n            <p>Logged in as: <span>${state.username}</span></p>\r\n            <button class=\"controls__logout\">Logout</button>\r\n        </div>\r\n    `;\r\n}\r\n\r\nfunction generateOnlineUsernameListHtml(state) {   \r\n    const loggedInUsernameListHtml = Object.keys(state.onlineUsers).map(username => {\r\n        return `\r\n            <li class=\"online__user\">\r\n                <span class=\"online__mark\"></span><span class=\"username\">${username}</span>\r\n            </li>\r\n        `;\r\n    }).join('');\r\n    return loggedInUsernameListHtml;\r\n}\r\n\r\nfunction generateMessageListHtml(state) {\r\n    const messageListHtml = Object.values(state.messages).map(message => {\r\n        return `\r\n            <li class=${message.username === state.username? \"user__message\":\"other__user__message\"}>\r\n                <p class=\"sender\">${message.username}</p>\r\n                <p class=\"text\">${message.text}</p>\r\n            </li>\r\n        `;\r\n    }).join('') || `<p class=\"no__message\">No messages yet</p>`;\r\n    return messageListHtml;\r\n}\r\n\r\nfunction generateSendMessageHtml(state) {\r\n    return `\r\n        <form class=\"send__form\" action=\"#/send\">\r\n            <input class=\"send__text\">\r\n            <button type=\"submit\" class=\"send__button\">Send</button>\r\n        </form>\r\n    `;\r\n}","export function fetchSession() {\r\n    return fetch(`/api/session`, {\r\n        method: \"GET\",\r\n    })\r\n    .catch(() => Promise.reject({ error: \"networkError\" }))\r\n    .then( response => {\r\n        if (response.ok) {\r\n            return response.json();\r\n        }\r\n        return response.json()\r\n        .catch( error => Promise.reject({ error }))\r\n        .then( err => Promise.reject(err));\r\n    });\r\n}\r\n\r\nexport function fetchLogin(username) {\r\n    return fetch(\"/api/session\", {\r\n        method: \"POST\",\r\n        headers: new Headers({\r\n            \"content-type\": \"application/json\",\r\n        }),\r\n        body: JSON.stringify({ username }),\r\n    })\r\n    .catch(() => Promise.reject({ error: \"networkError\" }))\r\n    .then( response => {\r\n        if (response.ok) {\r\n            return response.json();\r\n        }\r\n        return response.json()\r\n        .catch( error => Promise.reject({ error }))\r\n        .then( err => Promise.reject(err));\r\n    });\r\n}\r\n\r\nexport function fetchLogout() {\r\n    return fetch(\"/api/session\", {\r\n        method: \"DELETE\",\r\n    })\r\n    .catch(() => Promise.reject({ error: \"networkError\" }))\r\n    .then( response => {\r\n        if (response.ok) {\r\n            return response.json();\r\n        }\r\n        return response.json()\r\n        .catch( error => Promise.reject({ error }))\r\n        .then( err => Promise.reject(err));\r\n    });\r\n}\r\n\r\nexport function fetchOnlineUsers() {\r\n    return fetch(\"/api/users\", {\r\n        method: \"GET\",\r\n    })\r\n    .catch(() => Promise.reject({ error: \"networkError\" }))\r\n    .then( response => {\r\n        if (response.ok) {\r\n            return response.json();\r\n        }\r\n        return response.json()\r\n        .catch( error => Promise.reject({ error }))\r\n        .then( err => Promise.reject(err));\r\n    });\r\n}\r\n\r\nexport function fetchMessages() {\r\n    return fetch(\"/api/messages\", {\r\n        method: \"GET\",\r\n    })\r\n    .catch( () => Promise.reject({ error: \"networkError\" }) )\r\n    .then( response => {\r\n        if (response.ok) {\r\n            return response.json();\r\n        }\r\n        return response.json()\r\n        .catch( error => Promise.reject({ error }) )\r\n        .then( err => Promise.reject(err) );\r\n    });\r\n}\r\n\r\nexport function fetchAddMessage(text) {\r\n    return fetch(\"/api/messages\", {\r\n        method: \"POST\",\r\n        headers: new Headers({\r\n            \"content-type\": \"application/json\",\r\n        }),\r\n        body: JSON.stringify({ text }),\r\n    })\r\n    .catch(() => Promise.reject({ error: \"networkError\" }))\r\n    .then( response => {\r\n        if (response.ok) {\r\n            return response.json();\r\n        }\r\n        return response.json()\r\n        .catch( error => Promise.reject({ error }))\r\n        .then( err => Promise.reject(err));\r\n    });\r\n}","import { MESSAGES } from \"./constants\";\r\n\r\nconst state = {\r\n    username: \"\",\r\n    isLoginPending: true, \r\n    isLoggedIn: false, \r\n    isChatPending: false,\r\n    onlineUsers: {},\r\n    messages: {},\r\n    error: \"\",\r\n};\r\n\r\nexport function waitOnLogin() {\r\n    state.isLoginPending = true;\r\n    state.isLoggedIn = false;\r\n    state.username = \"\";\r\n    state.onlineUsers = {};\r\n    state.messages = {};\r\n    state.error = \"\";\r\n}\r\n\r\nexport function login(username) {\r\n    state.username = username;\r\n    state.isLoginPending = false;\r\n    state.isLoggedIn = true;\r\n    state.error = \"\";\r\n}\r\n\r\nexport function logout() {\r\n    state.username = \"\";\r\n    state.isLoginPending = false;\r\n    state.isLoggedIn = false;  \r\n    state.error = \"\";\r\n}\r\n\r\nexport function waitOnChat() {\r\n    state.isChatPending = true;\r\n    state.messages = {};\r\n    state.error = \"\";\r\n}\r\n\r\nexport function setMessages(messages) {\r\n    state.isChatPending = false;\r\n    state.messages = messages;\r\n    state.error = \"\";\r\n}\r\n\r\nexport function setOnlineUsers(onlineUsers) {\r\n    state.isChatPending = false;\r\n    state.onlineUsers = onlineUsers;\r\n    state.error = \"\";\r\n}\r\n\r\nexport function addMessage({id, text}) {\r\n    state.messages[id] = text;\r\n    state.error = \"\";\r\n}\r\n\r\nexport function setError(error) {\r\n    if (!error) {\r\n        state.error = \"\";\r\n        return;\r\n    }\r\n    state.error = MESSAGES[error] || MESSAGES.default;\r\n}\r\n\r\n\r\nexport default state;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { SERVER, CLIENT } from \"./constants\";\r\nimport state, {\r\n    waitOnLogin,\r\n    login,\r\n    logout, \r\n    setOnlineUsers,\r\n    setMessages,\r\n    setError,\r\n} from \"./state\";\r\nimport {\r\n    fetchSession,\r\n    fetchMessages, \r\n    fetchOnlineUsers, \r\n} from \"./services\";\r\nimport {\r\n    addAbilityToLogin,\r\n    addAbilityToLogout,\r\n    addAbilityToSendMessage,\r\n    scrollToLatestMessage,\r\n} from \"./listeners\";\r\nimport { \r\n    isMessagesDataNewest, \r\n    isOnlineUsersDataNewest,\r\n} from \"./checkers\";\r\nimport { \r\n    render,\r\n    rerenderMessages,\r\n    rerenderOnlineUsers,    \r\n} from \"./render\";\r\n\r\n\r\nconst appEl = document.querySelector(\"#app\");\r\n\r\nwaitAndCheckForSession();\r\naddAbilityToLogin({ state, appEl });\r\naddAbilityToSendMessage({ state, appEl });\r\naddAbilityToLogout({ state, appEl });\r\npollNewestChatData();\r\n\r\n\r\nfunction waitAndCheckForSession() {\r\n    waitOnLogin();\r\n    render({state, appEl});\r\n    setTimeout(() => checkForSession(), 1500);\r\n}\r\n\r\nfunction pollNewestChatData() {\r\n    setInterval(checkForUpdates, 5000);\r\n}\r\n\r\n\r\nfunction checkForSession() {\r\n    fetchSession()\r\n    .then( session => {\r\n        login(session.username);\r\n        render({ state, appEl });   \r\n        return fetchMessages();\r\n    })\r\n    .catch( err => {\r\n        if( err?.error === SERVER.AUTH_MISSING ) {\r\n            return Promise.reject({ error: CLIENT.NO_SESSION })\r\n        }\r\n        return Promise.reject(err);\r\n    })\r\n    .then( messages => {\r\n        setMessages(messages);\r\n        return fetchOnlineUsers();\r\n    })\r\n    .then( onlineUsers => {\r\n        setOnlineUsers(onlineUsers);\r\n        render({ state, appEl });\r\n        scrollToLatestMessage();\r\n    })\r\n    .catch( err => {\r\n        if( err?.error == CLIENT.NO_SESSION ) {\r\n            logout(); \r\n            render({ state, appEl });\r\n            return;\r\n        }\r\n        setError(err?.error || \"ERROR\"); \r\n        render({ state, appEl });\r\n    });\r\n}\r\n\r\nfunction checkForUpdates() {\r\n    // fetch updates only user is loggedIn and chat is loaded\r\n    if (state.isLoggedIn && !state.isChatPending) {\r\n        fetchMessages()\r\n        .then( messages => {\r\n            // rerender messagesEl only when new message added\r\n            if (!isMessagesDataNewest(messages, state.messages)) {\r\n                setMessages(messages);\r\n                rerenderMessages(state);\r\n                scrollToLatestMessage();\r\n            }\r\n            return fetchOnlineUsers();\r\n        })\r\n        .then( onlineUsers => {\r\n            // rerender onlineUsersEl only when other user login or logout\r\n            if (!isOnlineUsersDataNewest(onlineUsers, state.onlineUsers)) {\r\n                setOnlineUsers(onlineUsers);\r\n                rerenderOnlineUsers(state);\r\n            }  \r\n        })\r\n        .catch( err => {\r\n            setError(err?.error || \"ERROR\");\r\n            render({state, appEl});\r\n        });\r\n    }  \r\n}\r\n"],"names":["isMessagesDataNewest","fetchedMessages","stateMessages","fetchedLastMessageId","getLastElementKey","stateLastMessageId","isOnlineUsersDataNewest","fetchedOnlineUsers","stateOnlineUsers","fetchedLastOnlineUser","stateLastOnlineUser","Object","keys","length","jsonData","arr","SERVER","AUTH_MISSING","AUTH_INSUFFICIENT","AUTH_IN_USE","REQUIRED_USERNAME","REQUIRED_TEXT","TASK_MISSING","CLIENT","NETWORK_ERROR","NO_SESSION","MESSAGES","fetchLogin","fetchLogout","fetchOnlineUsers","fetchAddMessage","login","logout","waitOnChat","setOnlineUsers","setMessages","addMessage","setError","render","addAbilityToLogin","state","appEl","addEventListener","e","preventDefault","target","classList","contains","username","querySelector","value","then","messages","onlineUsers","setTimeout","scrollToLatestMessage","err","error","addAbilityToLogout","addAbilityToSendMessage","text","id","messagesEl","document","scrollTop","scrollHeight","html","generateStatusHtml","generateLoginHtml","generateContentHtml","innerHTML","rerenderMessages","generateMessageListHtml","rerenderOnlineUsers","usersEl","generateOnlineUsernameListHtml","isLoggedIn","isLoginPending","isChatPending","generateControlsHtml","generateSendMessageHtml","loggedInUsernameListHtml","map","join","messageListHtml","values","message","fetchSession","fetch","method","Promise","reject","response","ok","json","headers","Headers","body","JSON","stringify","fetchMessages","waitOnLogin","waitAndCheckForSession","pollNewestChatData","checkForSession","setInterval","checkForUpdates","session"],"sourceRoot":""}